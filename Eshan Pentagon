package org.firstinspires.ftc.teamcode;

import org.firstinspires.ftc.robotcore.opmode.Autonomous;
import org.firstinspires.ftc.robotcore.opmode.LinearOpMode;
import org.firstinspires.ftc.robotcore.hardware.DcMotor;

@Autonomous(name="PentagonMotion")
public class PentagonMotion extends LinearOpMode {

    private DcMotor motorFrontLeft, motorFrontRight, motorBackLeft, motorBackRight;

    // Adjust these values based on your robot's speed and wheel diameter
    private final double forwardSpeed = 0.5;
    private final double turnSpeed = 0.3;
    private final double sideLength = 28.0; // inches
    private final double wheelDiameter = 4.0; // inches

    @Override
    public void runOpMode() {
        // Initialize motors
        motorfrontLeft = hardwareMap.get(DcMotor.class, "Left_front");
        motorfrontRight = hardwareMap.get(DcMotor.class, "Right_front");
        motorbackLeft = hardwareMap.get(DcMotor.class, "Left_rear");
        motorbackRight = hardwareMap.get(DcMotor.class, "Right_rear");

        // Set motor directions (adjust as needed)
        motorfrontLeft.setDirection(DcMotor.Direction.REVERSE);
        motorbackLeft.setDirection(DcMotor.Direction.REVERSE);

        waitForStart();

        // Calculate angle for each turn (interior angle of a pentagon)
        double turnAngle = 108.0; // degrees

        // Convert angle to radians for trigonometric functions
        double radians = Math.toRadians(turnAngle);

        // Calculate time for forward and turn movements (adjust as needed)
        double forwardTime = (sideLength / wheelDiameter) / forwardSpeed; // seconds
        double turnTime = (radians / turnSpeed) / (2 * Math.PI); // seconds

        for (int i = 0; i < 5; i++) {
            // Move forward
            moveForward(forwardTime);

            // Turn
            turn(turnTime, radians);
        }
    }

    private void moveForward(double time) {
        motorfrontLeft.setPower(forwardSpeed);
        motorfrontRight.setPower(forwardSpeed);
        motorbackLeft.setPower(forwardSpeed);
        motorbackRight.setPower(forwardSpeed);
        sleep(time * 1000); // Convert seconds to milliseconds
        motorfrontLeft.setPower(0);
        motorfrontRight.setPower(0);
        motorbackLeft.setPower(0);
        motorbackRight.setPower(0);
    }

    private void turn(double time, double radians) {
        motorfrontLeft.setPower(turnSpeed);
        motorfrontRight.setPower(-turnSpeed);
        motorbackLeft.setPower(turnSpeed);
        motorbackRight.setPower(-turnSpeed);
        sleep(time * 1000); // Convert seconds to milliseconds
        motorfrontLeft.setPower(0);
        motorfrontRight.setPower(0);
        motorbackLeft.setPower(0);
        motorbackRight.setPower(0);
    }
}
